{"version":3,"file":"serializer.js","sourceRoot":"/","sources":["src/auth/strategies/serializer.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;AAKA,qDAA+C;AAC/C,2CAAoD;AACpD,+CAAsD;AAI/C,IAAM,iBAAiB,GAAvB,MAAM,iBAAkB,SAAQ,6BAAkB;IACvD,YAC2C,YAA2B;QAEpE,KAAK,EAAE,CAAC;QAFiC,iBAAY,GAAZ,YAAY,CAAe;IAGtE,CAAC;IAED,aAAa,CAAC,IAAU,EAAE,IAAc;QACtC,OAAO,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;QAC/B,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;IACnB,CAAC;IAED,KAAK,CAAC,eAAe,CAAC,OAAY,EAAE,IAAc;QAChD,MAAM,IAAI,GAAG,MAAM,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;QAC7D,OAAO,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC;QAChC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QAClB,OAAO,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;IACpD,CAAC;CACF,CAAA;AAlBY,8CAAiB;4BAAjB,iBAAiB;IAD7B,IAAA,mBAAU,GAAE;IAGR,WAAA,IAAA,eAAM,EAAC,oBAAQ,CAAC,KAAK,CAAC,CAAA;;GAFd,iBAAiB,CAkB7B","sourcesContent":["/* eslint-disable prettier/prettier */\r\n/* eslint-disable @typescript-eslint/no-unsafe-function-type */\r\n/* eslint-disable prettier/prettier */\r\n/* eslint-disable @typescript-eslint/no-unused-vars */\r\nimport { IUsersService } from 'src/users/users';\r\nimport { Services } from 'src/utils/constants';\r\nimport { Inject, Injectable } from '@nestjs/common';\r\nimport { PassportSerializer } from '@nestjs/passport';\r\nimport { User } from 'src/typeorm/entities/user.entity';\r\n\r\n@Injectable()\r\nexport class SessionSerializer extends PassportSerializer {\r\n  constructor(\r\n    @Inject(Services.USERS) private readonly usersService: IUsersService,\r\n  ) {\r\n    super();\r\n  }\r\n  \r\n  serializeUser(user: User, done: Function) {\r\n    console.log('Serialized User');\r\n    done(null, user);\r\n  }\r\n\r\n  async deserializeUser(payload: any, done: Function) {\r\n    const user = await this.usersService.findOneUser(payload.id);\r\n    console.log('Deserialize user');\r\n    console.log(user);\r\n    return user ? done(null, user) : done(null, null);\r\n  }\r\n}\r\n"]}